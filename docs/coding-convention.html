<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<TITLE>Q Light Controller Documentation - Coding Convention</TITLE>
</HEAD>

<CENTER>
<IMG SRC="../gfx/qlc.png">
<H1>Coding Convention</H1>
</CENTER>

<P>
This file describes the coding convention used in QLC source code. The purpose
of this document is to instruct developers to write somewhat uniform and 
clear code.
</P>

<HR>

<P>
Each source/header file should begin with this header:<BR>
<PRE>
/*
  Q Light Controller
  *individual source filename here*

  Copyright (c) Heikki Junnila
	        *your name here*

  This program is free software; you can redistribute it and/or
  modify it under the terms of the GNU General Public License
  Version 2 as published by the Free Software Foundation.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details. The license is
  in the file "COPYING".

  You should have received a copy of the GNU General Public License
  along with this program; if not, write to the Free Software
  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
*/
</PRE>
</P>

<HR>

<P>
Each member variable has a prefix "m_", for example:<BR>
<PRE>
	int m_fooMember;
</PRE>
Each global variable or function begins with "_", for example:
<PRE>
	int _foo;
</PRE>
<BR>
<B>Still, try to avoid global variables at all costs!</B>
</P>

<HR>

<P>
Each function begins with a small letter and in compound words, all
the following words begin with a capital letter. No word separation with
underscore is allowed. Otherwise known as camel-case. Examples:
<PRE>
	int foo();
	int fooBar();
	int thisIsAMemberFunction();
	int this_is_not_allowed_because_it_is_ugly;
</PRE>
</P>

<HR>

<P>
Follow the <A HREF="http://en.wikipedia.org/wiki/Indent_style#Allman_style_.28bsd_in_Emacs.29">
Allman style</A> with curly braces. The reason for this is simply code
readability by CLEARLY separating the <I>conditions</I> from <I>then(s)</I>.
<PRE>
	do
	{
		foo();
	}
	while (bar);
	
	if (foo == true)
	{
		foo();
	}
	else
	{
		bar();
	}
	
	for (int i = 0; i != n; i++)
	{
		foo(i);
	}

	void FooClass::fooBar()
	{
		...
	}
</PRE>

<P>
So, please don't do this. It's just pure, honest, 100% bullshit. By far the
biggest mistake <A HREF="http://en.wikipedia.org/wiki/Indent_style#K.26R_style">
Kernighan and Ritchie</A> made back in the days:
</P>
<PRE>
	if (something == something_else &&
	    something_completely_different != the_same) {
		do_something();
		and_also_something_else(with, a, couple, of,
					parameters);
	} else if (one_thing->leads_to_another ||
		   foo != bar) {
		do_something_else();
	}
</PRE>
</P>

<HR>

<P>
Each class name will be written with each word beginning with a capital letter.
Same rules apply here as for functions.
<PRE>
	class FooBar;
	class Foo;
</PRE>
</P>

<P>
Respectively, each class should be in its own file and the file name must be
the class' name, in small letters. If it makes things significantly more
logical, SMALL classes can be defined inside other classes' definitions and/or
files. File suffix for implementation files is ".cpp" and for header files ".h".
Do NOT use other styles.<BR>
In general:<BR>
class FooBarClass definition is saved in foobarclass.h<BR>
and its implementation is in foobarclass.cpp
</P>

<HR>

<P>
All macro definitions are written completely in capital letters, words
may be separated with "_". Example:
</P>

<PRE>
	#define FOOBAR 5
	#define FOO_BAR(x) foobar(x);
</PRE>

<P>
Normal integer macros, like the ones you would use to identify certain menu
items, columns etc. can be substituted with static constants, in which case, the
constant's name begins with a capital 'K'. This is done to associate them more
into the field of #defined macros than variables.<BR>
<PRE>
static const int KMenuItem ( 1000 );
</PRE>
</P>

<HR>

<P>
Each operator will be separated with spaces:
<PRE>
	if (foo == bar)
	while (foo != bar)
	int foo = bar;
	for (int foo = 0; foo != bar; foo++)
</PRE>

Not like this. You're only saving the spring mechanism on your space bar, but
cause a lot of bad eyesight for people trying to read your code.
<PRE>
	if(foo==bar)
	while(foo!=bar)
</PRE>
</P>

<HR>

<P>
Variable, function and class names should be descriptive. Use your common
sense here. Use <I>i</I> for the normal iterator pattern, but that's about it.
</P>

<HR>

<P>
Write nice and readable code. Do not write code in one pile, use spaces and
empty lines between logical sections. If you're trying to fit one function
within the vertical limits of your monitor, either get a bigger monitor or
refactor the code to smaller chunks.
</P>

<HR>

<P>
Line width is 80 characters, tabsize is 8, and NOT converted to spaces. If you
need longer lines, you should consider refactoring your code to smaller chunks,
thus reducing indentation level.
</P>

<HR>

<P>
WRITE COMMENTS. Tell others what your code is supposed to be doing. Even if it
seems obvious to you, it's hardly even close to obvious to anyone else.
</P>

<HR>
<I>Last modified: November 1st 2009, Heikki Junnila</I>

</BODY>
</HTML>
